{"ast":null,"code":"\"use strict\";\n\nObject.defineProperty(exports, \"__esModule\", {\n  value: true\n});\nexports.Identity = exports.IDENTITY_MAX_NAME_LEN = exports.IDENTITY_MAX_UNLOCK_DELAY = exports.IDENTITY_FLAG_TOKENIZED_CONTROL = exports.IDENTITY_FLAG_LOCKED = exports.IDENTITY_FLAG_ACTIVECURRENCY = exports.IDENTITY_FLAG_REVOKED = exports.IDENITTY_VERSION_INVALID = exports.IDENTITY_VERSION_PBAAS = exports.IDENTITY_VERSION_VAULT = void 0;\nconst varuint_1 = require(\"../utils/varuint\");\nconst bufferutils_1 = require(\"../utils/bufferutils\");\nconst Principal_1 = require(\"./Principal\");\nconst address_1 = require(\"../utils/address\");\nconst vdxf_1 = require(\"../constants/vdxf\");\nconst bn_js_1 = require(\"bn.js\");\nconst IdentityID_1 = require(\"./IdentityID\");\nconst SaplingPaymentAddress_1 = require(\"./SaplingPaymentAddress\");\nconst ContentMultiMap_1 = require(\"./ContentMultiMap\");\nexports.IDENTITY_VERSION_VAULT = new bn_js_1.BN(2, 10);\nexports.IDENTITY_VERSION_PBAAS = new bn_js_1.BN(3, 10);\nexports.IDENITTY_VERSION_INVALID = new bn_js_1.BN(0, 10);\nexports.IDENTITY_FLAG_REVOKED = new bn_js_1.BN(8000, 16); // set when this identity is revoked\nexports.IDENTITY_FLAG_ACTIVECURRENCY = new bn_js_1.BN(1, 16); // flag that is set when this ID is being used as an active currency name\nexports.IDENTITY_FLAG_LOCKED = new bn_js_1.BN(2, 16); // set when this identity is locked\nexports.IDENTITY_FLAG_TOKENIZED_CONTROL = new bn_js_1.BN(4, 16); // set when revocation/recovery over this identity can be performed by anyone who controls its token\nexports.IDENTITY_MAX_UNLOCK_DELAY = new bn_js_1.BN(60).mul(new bn_js_1.BN(24)).mul(new bn_js_1.BN(22)).mul(new bn_js_1.BN(365)); // 21+ year maximum unlock time for an ID w/1 minute blocks, not adjusted for avg blocktime in first PBaaS\nexports.IDENTITY_MAX_NAME_LEN = new bn_js_1.BN(64);\nconst {\n  BufferReader,\n  BufferWriter\n} = bufferutils_1.default;\nclass Identity extends Principal_1.Principal {\n  constructor(data) {\n    super(data);\n    if (data === null || data === void 0 ? void 0 : data.parent) this.parent = data.parent;\n    if (data === null || data === void 0 ? void 0 : data.system_id) this.system_id = data.system_id;\n    if (data === null || data === void 0 ? void 0 : data.name) this.name = data.name;\n    if (data === null || data === void 0 ? void 0 : data.content_map) this.content_map = data.content_map;else this.content_map = new Map();\n    if (data === null || data === void 0 ? void 0 : data.content_multimap) this.content_multimap = data.content_multimap;else this.content_multimap = new ContentMultiMap_1.ContentMultiMap({\n      kv_content: new Map()\n    });\n    if (data === null || data === void 0 ? void 0 : data.revocation_authority) this.revocation_authority = data.revocation_authority;\n    if (data === null || data === void 0 ? void 0 : data.recovery_authority) this.recovery_authority = data.recovery_authority;\n    if (data === null || data === void 0 ? void 0 : data.private_addresses) this.private_addresses = data.private_addresses;\n    if (data === null || data === void 0 ? void 0 : data.unlock_after) this.unlock_after = data.unlock_after;\n  }\n  getByteLength() {\n    let length = 0;\n    length += super.getByteLength();\n    length += this.parent.getByteLength();\n    const nameLength = Buffer.from(this.name, \"utf8\").length;\n    length += varuint_1.default.encodingLength(nameLength);\n    length += nameLength;\n    if (this.version.gte(exports.IDENTITY_VERSION_PBAAS)) {\n      length += this.content_multimap.getByteLength();\n    }\n    if (this.version.lt(exports.IDENTITY_VERSION_PBAAS)) {\n      length += varuint_1.default.encodingLength(this.content_map.size);\n      for (const m of this.content_map.entries()) {\n        length += 20; //uint160 key\n        length += 32; //uint256 hash\n      }\n    }\n    length += varuint_1.default.encodingLength(this.content_map.size);\n    for (const m of this.content_map.entries()) {\n      length += 20; //uint160 key\n      length += 32; //uint256 hash\n    }\n    length += this.revocation_authority.getByteLength(); //uint160 revocation authority\n    length += this.recovery_authority.getByteLength(); //uint160 recovery authority\n    // privateaddresses\n    length += varuint_1.default.encodingLength(this.private_addresses ? this.private_addresses.length : 0);\n    if (this.private_addresses) {\n      for (const n of this.private_addresses) {\n        length += n.getByteLength();\n      }\n    }\n    // post PBAAS\n    if (this.version.gte(exports.IDENTITY_VERSION_VAULT)) {\n      length += this.system_id.getByteLength(); //uint160 systemid\n      length += 4; //uint32 unlockafter\n    }\n    return length;\n  }\n  toBuffer() {\n    const writer = new BufferWriter(Buffer.alloc(this.getByteLength()));\n    writer.writeSlice(super.toBuffer());\n    writer.writeSlice(this.parent.toBuffer());\n    writer.writeVarSlice(Buffer.from(this.name, \"utf8\"));\n    //contentmultimap\n    if (this.version.gte(exports.IDENTITY_VERSION_PBAAS)) {\n      writer.writeSlice(this.content_multimap.toBuffer());\n    }\n    //contentmap\n    if (this.version.lt(exports.IDENTITY_VERSION_PBAAS)) {\n      writer.writeCompactSize(this.content_map.size);\n      for (const [key, value] of this.content_map.entries()) {\n        writer.writeSlice((0, address_1.fromBase58Check)(key).hash);\n        writer.writeSlice(value);\n      }\n    }\n    //contentmap2\n    writer.writeCompactSize(this.content_map.size);\n    for (const [key, value] of this.content_map.entries()) {\n      writer.writeSlice((0, address_1.fromBase58Check)(key).hash);\n      writer.writeSlice(value);\n    }\n    writer.writeSlice(this.revocation_authority.toBuffer());\n    writer.writeSlice(this.recovery_authority.toBuffer());\n    // privateaddresses\n    writer.writeCompactSize(this.private_addresses ? this.private_addresses.length : 0);\n    if (this.private_addresses) {\n      for (const n of this.private_addresses) {\n        writer.writeSlice(n.toBuffer());\n      }\n    }\n    // post PBAAS\n    if (this.version.gte(exports.IDENTITY_VERSION_VAULT)) {\n      writer.writeSlice(this.system_id.toBuffer());\n      writer.writeUInt32(this.unlock_after.toNumber());\n    }\n    return writer.buffer;\n  }\n  fromBuffer(buffer, offset = 0, multimapKeylists = []) {\n    const reader = new BufferReader(buffer, offset);\n    reader.offset = super.fromBuffer(reader.buffer, reader.offset);\n    const _parent = new IdentityID_1.IdentityID();\n    reader.offset = _parent.fromBuffer(reader.buffer, reader.offset);\n    this.parent = _parent;\n    this.name = Buffer.from(reader.readVarSlice()).toString('utf8');\n    //contentmultimap\n    if (this.version.gte(exports.IDENTITY_VERSION_PBAAS)) {\n      const multimap = new ContentMultiMap_1.ContentMultiMap();\n      reader.offset = multimap.fromBuffer(reader.buffer, reader.offset, multimapKeylists);\n      this.content_multimap = multimap;\n    }\n    // contentmap\n    if (this.version.lt(exports.IDENTITY_VERSION_PBAAS)) {\n      const contentMapSize = reader.readVarInt();\n      this.content_map = new Map();\n      for (var i = 0; i < contentMapSize.toNumber(); i++) {\n        const contentMapKey = (0, address_1.toBase58Check)(reader.readSlice(20), vdxf_1.I_ADDR_VERSION);\n        this.content_map.set(contentMapKey, reader.readSlice(32));\n      }\n    }\n    const contentMapSize = reader.readVarInt();\n    this.content_map = new Map();\n    for (var i = 0; i < contentMapSize.toNumber(); i++) {\n      const contentMapKey = (0, address_1.toBase58Check)(reader.readSlice(20), vdxf_1.I_ADDR_VERSION);\n      this.content_map.set(contentMapKey, reader.readSlice(32));\n    }\n    const _revocation = new IdentityID_1.IdentityID();\n    reader.offset = _revocation.fromBuffer(reader.buffer, reader.offset);\n    this.revocation_authority = _revocation;\n    const _recovery = new IdentityID_1.IdentityID();\n    reader.offset = _recovery.fromBuffer(reader.buffer, reader.offset);\n    this.recovery_authority = _recovery;\n    const numPrivateAddresses = reader.readVarInt();\n    if (numPrivateAddresses.gt(new bn_js_1.BN(0))) this.private_addresses = [];\n    for (var i = 0; i < numPrivateAddresses.toNumber(); i++) {\n      const saplingAddr = new SaplingPaymentAddress_1.SaplingPaymentAddress();\n      reader.offset = saplingAddr.fromBuffer(reader.buffer, reader.offset);\n      this.private_addresses.push(saplingAddr);\n    }\n    if (this.version.gte(exports.IDENTITY_VERSION_VAULT)) {\n      const _system = new IdentityID_1.IdentityID();\n      reader.offset = _system.fromBuffer(reader.buffer, reader.offset);\n      this.system_id = _system;\n      this.unlock_after = new bn_js_1.BN(reader.readUInt32(), 10);\n    }\n    return reader.offset;\n  }\n  toJson() {\n    const contentmap = {};\n    for (const [key, value] of this.content_map.entries()) {\n      contentmap[key] = value.toString('hex');\n    }\n    const multimapJson = this.content_multimap.toJson();\n    const contentmultimap = {};\n    for (const key in multimapJson) {\n      const value = multimapJson[key];\n      const items = [];\n      if (Array.isArray(value)) {\n        for (const x of value) {\n          if ((0, ContentMultiMap_1.isKvValueArrayItemVdxfUniValueJson)(x)) {\n            const _x = Object.assign({}, x);\n            for (const key of Object.keys(x)) {\n              if (Buffer.isBuffer(x[key])) _x[key] = x[key].toString('hex');else _x[key] = x[key];\n            }\n            items.push(_x);\n          } else items.push(x);\n        }\n      } else if ((0, ContentMultiMap_1.isKvValueArrayItemVdxfUniValueJson)(value)) {\n        const _x = Object.assign({}, value);\n        for (const key of Object.keys(value)) {\n          if (Buffer.isBuffer(value[key])) _x[key] = value[key].toString('hex');else _x[key] = value[key];\n        }\n        items.push(_x);\n      } else if (typeof value === 'string') {\n        items.push(value);\n      } else throw new Error(\"Invalid multimap value\");\n      contentmultimap[key] = items;\n    }\n    return {\n      contentmap,\n      contentmultimap,\n      flags: this.flags.toNumber(),\n      minimumsignatures: this.min_sigs.toNumber(),\n      name: this.name,\n      parent: this.parent.toAddress(),\n      primaryaddresses: this.primary_addresses.map(x => x.toAddress()),\n      // privateaddress: this.private_addresses, TODO: Implement SaplingPaymentAddr decoding\n      recoveryauthority: this.recovery_authority.toAddress(),\n      revocationauthority: this.revocation_authority.toAddress(),\n      systemid: this.system_id.toAddress(),\n      timelock: this.unlock_after.toNumber(),\n      version: this.unlock_after.toNumber(),\n      identityaddress: (0, address_1.nameAndParentAddrToIAddr)(this.name, this.parent.toAddress())\n    };\n  }\n}\nexports.Identity = Identity;","map":{"version":3,"names":["Object","defineProperty","exports","value","Identity","IDENTITY_MAX_NAME_LEN","IDENTITY_MAX_UNLOCK_DELAY","IDENTITY_FLAG_TOKENIZED_CONTROL","IDENTITY_FLAG_LOCKED","IDENTITY_FLAG_ACTIVECURRENCY","IDENTITY_FLAG_REVOKED","IDENITTY_VERSION_INVALID","IDENTITY_VERSION_PBAAS","IDENTITY_VERSION_VAULT","varuint_1","require","bufferutils_1","Principal_1","address_1","vdxf_1","bn_js_1","IdentityID_1","SaplingPaymentAddress_1","ContentMultiMap_1","BN","mul","BufferReader","BufferWriter","default","Principal","constructor","data","parent","system_id","name","content_map","Map","content_multimap","ContentMultiMap","kv_content","revocation_authority","recovery_authority","private_addresses","unlock_after","getByteLength","length","nameLength","Buffer","from","encodingLength","version","gte","lt","size","m","entries","n","toBuffer","writer","alloc","writeSlice","writeVarSlice","writeCompactSize","key","fromBase58Check","hash","writeUInt32","toNumber","buffer","fromBuffer","offset","multimapKeylists","reader","_parent","IdentityID","readVarSlice","toString","multimap","contentMapSize","readVarInt","i","contentMapKey","toBase58Check","readSlice","I_ADDR_VERSION","set","_revocation","_recovery","numPrivateAddresses","gt","saplingAddr","SaplingPaymentAddress","push","_system","readUInt32","toJson","contentmap","multimapJson","contentmultimap","items","Array","isArray","x","isKvValueArrayItemVdxfUniValueJson","_x","assign","keys","isBuffer","Error","flags","minimumsignatures","min_sigs","toAddress","primaryaddresses","primary_addresses","map","recoveryauthority","revocationauthority","systemid","timelock","identityaddress","nameAndParentAddrToIAddr"],"sources":["/Users/oddfl3x/Code/bridge2/NATI<>bridge_API_SWAP/node_modules/verus-typescript-primitives/dist/pbaas/Identity.js"],"sourcesContent":["\"use strict\";\nObject.defineProperty(exports, \"__esModule\", { value: true });\nexports.Identity = exports.IDENTITY_MAX_NAME_LEN = exports.IDENTITY_MAX_UNLOCK_DELAY = exports.IDENTITY_FLAG_TOKENIZED_CONTROL = exports.IDENTITY_FLAG_LOCKED = exports.IDENTITY_FLAG_ACTIVECURRENCY = exports.IDENTITY_FLAG_REVOKED = exports.IDENITTY_VERSION_INVALID = exports.IDENTITY_VERSION_PBAAS = exports.IDENTITY_VERSION_VAULT = void 0;\nconst varuint_1 = require(\"../utils/varuint\");\nconst bufferutils_1 = require(\"../utils/bufferutils\");\nconst Principal_1 = require(\"./Principal\");\nconst address_1 = require(\"../utils/address\");\nconst vdxf_1 = require(\"../constants/vdxf\");\nconst bn_js_1 = require(\"bn.js\");\nconst IdentityID_1 = require(\"./IdentityID\");\nconst SaplingPaymentAddress_1 = require(\"./SaplingPaymentAddress\");\nconst ContentMultiMap_1 = require(\"./ContentMultiMap\");\nexports.IDENTITY_VERSION_VAULT = new bn_js_1.BN(2, 10);\nexports.IDENTITY_VERSION_PBAAS = new bn_js_1.BN(3, 10);\nexports.IDENITTY_VERSION_INVALID = new bn_js_1.BN(0, 10);\nexports.IDENTITY_FLAG_REVOKED = new bn_js_1.BN(8000, 16); // set when this identity is revoked\nexports.IDENTITY_FLAG_ACTIVECURRENCY = new bn_js_1.BN(1, 16); // flag that is set when this ID is being used as an active currency name\nexports.IDENTITY_FLAG_LOCKED = new bn_js_1.BN(2, 16); // set when this identity is locked\nexports.IDENTITY_FLAG_TOKENIZED_CONTROL = new bn_js_1.BN(4, 16); // set when revocation/recovery over this identity can be performed by anyone who controls its token\nexports.IDENTITY_MAX_UNLOCK_DELAY = new bn_js_1.BN(60).mul(new bn_js_1.BN(24)).mul(new bn_js_1.BN(22)).mul(new bn_js_1.BN(365)); // 21+ year maximum unlock time for an ID w/1 minute blocks, not adjusted for avg blocktime in first PBaaS\nexports.IDENTITY_MAX_NAME_LEN = new bn_js_1.BN(64);\nconst { BufferReader, BufferWriter } = bufferutils_1.default;\nclass Identity extends Principal_1.Principal {\n    constructor(data) {\n        super(data);\n        if (data === null || data === void 0 ? void 0 : data.parent)\n            this.parent = data.parent;\n        if (data === null || data === void 0 ? void 0 : data.system_id)\n            this.system_id = data.system_id;\n        if (data === null || data === void 0 ? void 0 : data.name)\n            this.name = data.name;\n        if (data === null || data === void 0 ? void 0 : data.content_map)\n            this.content_map = data.content_map;\n        else\n            this.content_map = new Map();\n        if (data === null || data === void 0 ? void 0 : data.content_multimap)\n            this.content_multimap = data.content_multimap;\n        else\n            this.content_multimap = new ContentMultiMap_1.ContentMultiMap({ kv_content: new Map() });\n        if (data === null || data === void 0 ? void 0 : data.revocation_authority)\n            this.revocation_authority = data.revocation_authority;\n        if (data === null || data === void 0 ? void 0 : data.recovery_authority)\n            this.recovery_authority = data.recovery_authority;\n        if (data === null || data === void 0 ? void 0 : data.private_addresses)\n            this.private_addresses = data.private_addresses;\n        if (data === null || data === void 0 ? void 0 : data.unlock_after)\n            this.unlock_after = data.unlock_after;\n    }\n    getByteLength() {\n        let length = 0;\n        length += super.getByteLength();\n        length += this.parent.getByteLength();\n        const nameLength = Buffer.from(this.name, \"utf8\").length;\n        length += varuint_1.default.encodingLength(nameLength);\n        length += nameLength;\n        if (this.version.gte(exports.IDENTITY_VERSION_PBAAS)) {\n            length += this.content_multimap.getByteLength();\n        }\n        if (this.version.lt(exports.IDENTITY_VERSION_PBAAS)) {\n            length += varuint_1.default.encodingLength(this.content_map.size);\n            for (const m of this.content_map.entries()) {\n                length += 20; //uint160 key\n                length += 32; //uint256 hash\n            }\n        }\n        length += varuint_1.default.encodingLength(this.content_map.size);\n        for (const m of this.content_map.entries()) {\n            length += 20; //uint160 key\n            length += 32; //uint256 hash\n        }\n        length += this.revocation_authority.getByteLength(); //uint160 revocation authority\n        length += this.recovery_authority.getByteLength(); //uint160 recovery authority\n        // privateaddresses\n        length += varuint_1.default.encodingLength(this.private_addresses ? this.private_addresses.length : 0);\n        if (this.private_addresses) {\n            for (const n of this.private_addresses) {\n                length += n.getByteLength();\n            }\n        }\n        // post PBAAS\n        if (this.version.gte(exports.IDENTITY_VERSION_VAULT)) {\n            length += this.system_id.getByteLength(); //uint160 systemid\n            length += 4; //uint32 unlockafter\n        }\n        return length;\n    }\n    toBuffer() {\n        const writer = new BufferWriter(Buffer.alloc(this.getByteLength()));\n        writer.writeSlice(super.toBuffer());\n        writer.writeSlice(this.parent.toBuffer());\n        writer.writeVarSlice(Buffer.from(this.name, \"utf8\"));\n        //contentmultimap\n        if (this.version.gte(exports.IDENTITY_VERSION_PBAAS)) {\n            writer.writeSlice(this.content_multimap.toBuffer());\n        }\n        //contentmap\n        if (this.version.lt(exports.IDENTITY_VERSION_PBAAS)) {\n            writer.writeCompactSize(this.content_map.size);\n            for (const [key, value] of this.content_map.entries()) {\n                writer.writeSlice((0, address_1.fromBase58Check)(key).hash);\n                writer.writeSlice(value);\n            }\n        }\n        //contentmap2\n        writer.writeCompactSize(this.content_map.size);\n        for (const [key, value] of this.content_map.entries()) {\n            writer.writeSlice((0, address_1.fromBase58Check)(key).hash);\n            writer.writeSlice(value);\n        }\n        writer.writeSlice(this.revocation_authority.toBuffer());\n        writer.writeSlice(this.recovery_authority.toBuffer());\n        // privateaddresses\n        writer.writeCompactSize(this.private_addresses ? this.private_addresses.length : 0);\n        if (this.private_addresses) {\n            for (const n of this.private_addresses) {\n                writer.writeSlice(n.toBuffer());\n            }\n        }\n        // post PBAAS\n        if (this.version.gte(exports.IDENTITY_VERSION_VAULT)) {\n            writer.writeSlice(this.system_id.toBuffer());\n            writer.writeUInt32(this.unlock_after.toNumber());\n        }\n        return writer.buffer;\n    }\n    fromBuffer(buffer, offset = 0, multimapKeylists = []) {\n        const reader = new BufferReader(buffer, offset);\n        reader.offset = super.fromBuffer(reader.buffer, reader.offset);\n        const _parent = new IdentityID_1.IdentityID();\n        reader.offset = _parent.fromBuffer(reader.buffer, reader.offset);\n        this.parent = _parent;\n        this.name = Buffer.from(reader.readVarSlice()).toString('utf8');\n        //contentmultimap\n        if (this.version.gte(exports.IDENTITY_VERSION_PBAAS)) {\n            const multimap = new ContentMultiMap_1.ContentMultiMap();\n            reader.offset = multimap.fromBuffer(reader.buffer, reader.offset, multimapKeylists);\n            this.content_multimap = multimap;\n        }\n        // contentmap\n        if (this.version.lt(exports.IDENTITY_VERSION_PBAAS)) {\n            const contentMapSize = reader.readVarInt();\n            this.content_map = new Map();\n            for (var i = 0; i < contentMapSize.toNumber(); i++) {\n                const contentMapKey = (0, address_1.toBase58Check)(reader.readSlice(20), vdxf_1.I_ADDR_VERSION);\n                this.content_map.set(contentMapKey, reader.readSlice(32));\n            }\n        }\n        const contentMapSize = reader.readVarInt();\n        this.content_map = new Map();\n        for (var i = 0; i < contentMapSize.toNumber(); i++) {\n            const contentMapKey = (0, address_1.toBase58Check)(reader.readSlice(20), vdxf_1.I_ADDR_VERSION);\n            this.content_map.set(contentMapKey, reader.readSlice(32));\n        }\n        const _revocation = new IdentityID_1.IdentityID();\n        reader.offset = _revocation.fromBuffer(reader.buffer, reader.offset);\n        this.revocation_authority = _revocation;\n        const _recovery = new IdentityID_1.IdentityID();\n        reader.offset = _recovery.fromBuffer(reader.buffer, reader.offset);\n        this.recovery_authority = _recovery;\n        const numPrivateAddresses = reader.readVarInt();\n        if (numPrivateAddresses.gt(new bn_js_1.BN(0)))\n            this.private_addresses = [];\n        for (var i = 0; i < numPrivateAddresses.toNumber(); i++) {\n            const saplingAddr = new SaplingPaymentAddress_1.SaplingPaymentAddress();\n            reader.offset = saplingAddr.fromBuffer(reader.buffer, reader.offset);\n            this.private_addresses.push(saplingAddr);\n        }\n        if (this.version.gte(exports.IDENTITY_VERSION_VAULT)) {\n            const _system = new IdentityID_1.IdentityID();\n            reader.offset = _system.fromBuffer(reader.buffer, reader.offset);\n            this.system_id = _system;\n            this.unlock_after = new bn_js_1.BN(reader.readUInt32(), 10);\n        }\n        return reader.offset;\n    }\n    toJson() {\n        const contentmap = {};\n        for (const [key, value] of this.content_map.entries()) {\n            contentmap[key] = value.toString('hex');\n        }\n        const multimapJson = this.content_multimap.toJson();\n        const contentmultimap = {};\n        for (const key in multimapJson) {\n            const value = multimapJson[key];\n            const items = [];\n            if (Array.isArray(value)) {\n                for (const x of value) {\n                    if ((0, ContentMultiMap_1.isKvValueArrayItemVdxfUniValueJson)(x)) {\n                        const _x = Object.assign({}, x);\n                        for (const key of Object.keys(x)) {\n                            if (Buffer.isBuffer(x[key]))\n                                _x[key] = x[key].toString('hex');\n                            else\n                                _x[key] = x[key];\n                        }\n                        items.push(_x);\n                    }\n                    else\n                        items.push(x);\n                }\n            }\n            else if ((0, ContentMultiMap_1.isKvValueArrayItemVdxfUniValueJson)(value)) {\n                const _x = Object.assign({}, value);\n                for (const key of Object.keys(value)) {\n                    if (Buffer.isBuffer(value[key]))\n                        _x[key] = value[key].toString('hex');\n                    else\n                        _x[key] = value[key];\n                }\n                items.push(_x);\n            }\n            else if (typeof value === 'string') {\n                items.push(value);\n            }\n            else\n                throw new Error(\"Invalid multimap value\");\n            contentmultimap[key] = items;\n        }\n        return {\n            contentmap,\n            contentmultimap,\n            flags: this.flags.toNumber(),\n            minimumsignatures: this.min_sigs.toNumber(),\n            name: this.name,\n            parent: this.parent.toAddress(),\n            primaryaddresses: this.primary_addresses.map(x => x.toAddress()),\n            // privateaddress: this.private_addresses, TODO: Implement SaplingPaymentAddr decoding\n            recoveryauthority: this.recovery_authority.toAddress(),\n            revocationauthority: this.revocation_authority.toAddress(),\n            systemid: this.system_id.toAddress(),\n            timelock: this.unlock_after.toNumber(),\n            version: this.unlock_after.toNumber(),\n            identityaddress: (0, address_1.nameAndParentAddrToIAddr)(this.name, this.parent.toAddress())\n        };\n    }\n}\nexports.Identity = Identity;\n"],"mappings":"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","ignoreList":[]},"metadata":{},"sourceType":"script"}